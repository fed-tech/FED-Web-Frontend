import{r as l,A as D,u as S,f as M,b as c,F as x,j as e,d as F,L as w}from"./index-b820c58a.js";import{p as O,A as _,L as $}from"./Alert-92fa6f30.js";import{L as a,g as j,C as I,O as T,H as q}from"./Header-2581c183.js";import{b as z}from"./bcrypt-30fdde89.js";import{r as k,i as R,a as L}from"./jsx-runtime_commonjs-proxy-1590ad65.js";function B({setLoad:f}){const[d,u]=l.useState([]),[m,v]=l.useState(),[E,p]=l.useState({mainColor:"",secondaryColor:"",symbol:"",title:"",text:"",val:!1}),r=l.useContext(D),i=S(),y=M({onSuccess:n=>v(n)}),C=async()=>{try{f(!0);const n=await F.get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${m.access_token}`,{headers:{Authorization:`Bearer ${m.access_token}`,Accept:"application/json"}});let o={email:n.data.email};const t=await F.post("/auth/googleverification",o);if(console.log(t.data),t.data.status===!0){f(!1),r.login(t.data.user.name,t.data.user.email,t.data.user.img,t.data.user.RollNumber,t.data.user.School,t.data.user.College,t.data.user.MobileNo,t.data.user.selected,t.data.user.regForm,Number(t.data.user.access),t.data.token,108e5),console.log("Login Done ðŸ’¯ðŸ’¯ðŸ’¯ðŸ’¯ðŸ’¯"),r.target==""?i("/MyProfile"):(i(`/${r.target}`),r.settarget(null));return}else f(!1),t.data.code===4?p({mainColor:"#E5F6FD",secondaryColor:"#1AB1F5",symbol:"info",title:"Information",text:"Email not verified",val:!0}):t.data.code===2?(localStorage.setItem("user",JSON.stringify(n.data)),u(n.data)):p({mainColor:"#FDEDED",secondaryColor:"#F16360",symbol:"error",title:"Error",text:"An Unexpected Error Occurred",val:!0})}catch(n){console.log(n),f(!1),p({mainColor:"#FDEDED",secondaryColor:"#F16360",symbol:"error",title:"Error",text:"The action was not carried out succesfully please try again.",val:!0})}};return l.useEffect(()=>{m&&C()},[m]),c(x,{children:[c("div",{className:a.googlepart,onClick:()=>y(),children:[e("img",{src:j,className:a.icon}),e("p",{className:a.log,children:"Login with Google"})]}),e(_,{variant:E,val:p}),e(I,{data:d,set:u}),";"]})}B.propTypes={setLoad:O.func.isRequired};var b={},G=R;Object.defineProperty(b,"__esModule",{value:!0});var P=b.default=void 0,U=G(k()),V=L,H=(0,U.default)((0,V.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");P=b.default=H;var N={},W=R;Object.defineProperty(N,"__esModule",{value:!0});var A=N.default=void 0,J=W(k()),Y=L,K=(0,J.default)((0,Y.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");A=N.default=K;function Q(){const[f,d]=l.useState(!1),[u,m]=l.useState(!1),[v,E]=l.useState({email:"",passwrd:""}),[p,r]=l.useState({mainColor:"",secondaryColor:"",symbol:"",title:"",text:"",val:!1}),i=l.useContext(D),y=S(),C=o=>{const t=o.target.name,g=o.target.value;g===""?(o.target.style.borderBottom="1.5px solid transparent",o.target.style.outline="none"):o.target.style.borderBottom="1.5px solid transparent",t==="email"&&(g.indexOf("@")===-1||g.indexOf(".")===-1?(o.target.style.borderBottom="1.5px solid  #FF0000",o.target.style.outline="none"):o.target.style.borderBottom="1.5px solid  black"),E({...v,[t]:g})},n=async o=>{o.preventDefault(),d(!0);const{email:t,passwrd:g}=v;if(t!=""&&g!="")try{const h=z.hashSync(g,{}.VITE_BCRYPT),s=await F.post("/auth/login",{username:t,password:h});if(console.log(s.data),console.log("response.data.status === true",s.data.status===!0),s.data.status===!0){d(!1),r({mainColor:"#EDFEEE",secondaryColor:"#5CB660",symbol:"check_circle",title:"Success",text:"",val:!0}),console.log("----------------------------------------"),await i.login(s.data.result[0].name,s.data.result[0].email,s.data.result[0].img,s.data.result[0].RollNumber,s.data.result[0].School,s.data.result[0].College,s.data.result[0].MobileNo,s.data.result[0].selected,s.data.result[0].regForm,Number(s.data.result[0].access),s.data.token,108e5),console.log("===================================="),console.log("access->",s.data.result[0].access=="0"),console.log("authCtx.target -> ",i.target),i.target==""?y("/MyProfile"):(y(`/${i.target}`),i.settarget(null));return}}catch(h){if(d(!1),h.response.data.code===4){r({mainColor:"#E5F6FD",secondaryColor:"#1AB1F5",symbol:"info",title:"Information",text:"email",val:!0});return}else if(h.response.data.code===2){r({mainColor:"#FFC0CB",secondaryColor:"#FF69B4",symbol:"pets",title:"Check it out",text:"Invalid Credentials",val:!0});return}else r({mainColor:"#FDEDED",secondaryColor:"#F16360",symbol:"error",title:"Error",text:"An Unexpected Error Occurred",val:!0});console.log(h)}else d(!1),r({mainColor:"#FFC0CB",secondaryColor:"#FF69B4",symbol:"pets",title:"Check it out",text:"Please Fill All The Details",val:!0})};return c(x,{children:[e(B,{setLoad:d}),e(T,{}),c("form",{className:a.formTag,children:[e("div",{className:a.user,children:e("input",{type:"text",placeholder:"Email",className:a.username,onChange:C,name:"email",required:!0})}),c("div",{className:a.pass,children:[e("input",{type:u?"text":"password",placeholder:"Password",className:a.password,onChange:C,name:"passwrd",required:!0}),u?e(A,{className:a.iconSee,onClick:()=>m(!u)}):e(P,{className:a.iconSee,onClick:()=>m(!u)})]}),e("div",{className:a.forgotPassword,children:e(w,{to:"/forgotpassword",className:"LinkStyle",children:e("p",{className:a.forgotPasswordPTag,children:"Forgot Password?"})})}),e("button",{className:a.logtwo,type:"submit",onClick:n,children:f?e($,{}):"Login"})]}),e("div",{className:a.dont,children:c("p",{className:a.signup,children:["Don't have an account?"," ",e(w,{to:"/Register",className:"LinkStyle",children:e("span",{className:a.spann,children:"Signup"})})]})}),e(_,{variant:p,val:r,email:v.email})]})}function X(){return e(x,{children:e("div",{className:a.full,children:c("div",{className:a.inside,children:[e("div",{className:a.title1,children:e("p",{className:a.FED,children:"FED"})}),c("div",{className:a.whitebox,children:[e(q,{title:"Welcome Back",des:"Please Enter your details"}),e(Q,{})]})]})})})}function oe(){return l.useEffect(()=>{window.scrollTo(0,0)},[]),e(x,{children:e(X,{})})}export{oe as default};
